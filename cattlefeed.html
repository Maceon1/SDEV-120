<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Cattle Feed Calculator (Improved)</title>
<style>
body{font-family:Arial,sans-serif;background:#000000;padding:20px}
.container{max-width:800px;margin:auto;background:#fff;padding:20px;border-radius:10px}
label{display:block;margin-top:12px;font-weight:bold}
input,select{width:100%;padding:8px;margin-top:4px}
button{margin-top:20px;width:100%;padding:12px;border:none;border-radius:6px}
.results{margin-top:20px;background:#eee;padding:15px;border-radius:6px}
a{text-decoration:none;font-weight:bold}
.small{font-size:13px;color:#555}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
</style>
</head>
<body>
<div class="container">
<a href="index.html">← Back Home</a>
<h1>Cattle Feed Calculator</h1>
<p class="small">Estimates dry matter intake and crude protein needs based on body weight and production stage.</p>

<label>Animal Weight (lbs)</label>
<input id="weight" type="number" placeholder="e.g. 1200" />

<label>Production Stage</label>
<select id="stage">
  <option value="maintenance">Maintenance (dry cow / mature steer)</option>
  <option value="growing">Growing</option>
  <option value="lactating">Lactating</option>
</select>

<div class="grid">
<div>
<label>Forage Offered (lbs as-fed/day)</label>
<input id="forage" type="number" placeholder="e.g. 25" />
</div>
<div>
<label>Forage Protein %</label>
<input id="forageCP" type="number" placeholder="e.g. 10" />
</div>
</div>

<div class="grid">
<div>
<label>Grain / Supplement (lbs as-fed/day)</label>
<input id="grain" type="number" value="0" />
</div>
<div>
<label>Grain Protein %</label>
<input id="grainCP" type="number" value="16" />
</div>
</div>

<button onclick="calculateCattle()">Calculate Ration</button>

<div id="results" class="results"></div>
</div>

<script>
function calculateCattle(){
  const lbs = parseFloat(weight.value);
  const stage = document.getElementById('stage').value;
  const forage = parseFloat(document.getElementById('forage').value) || 0;
  const forageCP = parseFloat(document.getElementById('forageCP').value) || 0;
  const grain = parseFloat(document.getElementById('grain').value) || 0;
  const grainCP = parseFloat(document.getElementById('grainCP').value) || 0;

  if(!lbs || lbs<=0){
    results.innerHTML='Please enter a valid animal weight.';
    return;
  }

  // Dry matter intake estimates (% of body weight)
  let dmiPercent = 0.025;
  if(stage==='growing') dmiPercent = 0.028;
  if(stage==='lactating') dmiPercent = 0.032;

  const DMIrequired = lbs * dmiPercent;

  // Crude protein targets
  let cpTarget = 0.10;
  if(stage==='growing') cpTarget = 0.13;
  if(stage==='lactating') cpTarget = 0.16;

  const CPrequired = DMIrequired * cpTarget;

  // Assume feeds are ~90% dry matter
  const forageDM = forage * 0.9;
  const grainDM = grain * 0.9;
  const totalDM = forageDM + grainDM;

  const forageProtein = forageDM * (forageCP/100);
  const grainProtein = grainDM * (grainCP/100);
  const CPsupplied = forageProtein + grainProtein;

  const intakeOK = totalDM >= DMIrequired * 0.95;
  const proteinOK = CPsupplied >= CPrequired * 0.95;

  results.innerHTML = `
  <strong>Results</strong><br><br>
  Estimated dry matter needed: ${DMIrequired.toFixed(1)} lbs/day<br>
  Dry matter supplied: ${totalDM.toFixed(1)} lbs/day<br><br>

  Protein required: ${CPrequired.toFixed(2)} lbs/day<br>
  Protein supplied: ${CPsupplied.toFixed(2)} lbs/day<br><br>

  ${intakeOK ? '✔ Intake meets requirement' : '⚠ Increase total feed'}<br>
  ${proteinOK ? '✔ Protein adequate' : '⚠ Increase protein or supplement'}<br><br>

  <span class="small">Tip: This is an estimate. Adjust based on body condition score and production performance.</span>
  `;
}
</script>
</body>
</html>
